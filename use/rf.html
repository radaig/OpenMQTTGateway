<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RF gateways  (433mhz/315mhz) | OpenMQTTGateway V1</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="icon" href="/img/Openmqttgateway_logo_mini.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="One gateway, many technologies: MQTT gateway for ESP8266, ESP32, Sonoff RF Bridge or Arduino with bidirectional 433mhz/315mhz/868mhz, Infrared communications, BLE, beacons detection, mi flora / mi jia / LYWSD02/ Mi Scale compatibility, SMS & LORA.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.d55c9000.css" as="style"><link rel="preload" href="/assets/js/app.a0238183.js" as="script"><link rel="preload" href="/assets/js/2.fe34e03b.js" as="script"><link rel="preload" href="/assets/js/11.9ebab4b7.js" as="script"><link rel="prefetch" href="/assets/js/10.0232ce1d.js"><link rel="prefetch" href="/assets/js/12.35368dc4.js"><link rel="prefetch" href="/assets/js/13.93cb791f.js"><link rel="prefetch" href="/assets/js/14.7be7dba9.js"><link rel="prefetch" href="/assets/js/15.a0665b07.js"><link rel="prefetch" href="/assets/js/16.8aa222ea.js"><link rel="prefetch" href="/assets/js/17.e2f30d99.js"><link rel="prefetch" href="/assets/js/18.019570f2.js"><link rel="prefetch" href="/assets/js/19.989b7c13.js"><link rel="prefetch" href="/assets/js/20.a5e3f636.js"><link rel="prefetch" href="/assets/js/21.1fcd999d.js"><link rel="prefetch" href="/assets/js/22.890ded53.js"><link rel="prefetch" href="/assets/js/23.47e54f0e.js"><link rel="prefetch" href="/assets/js/24.c9515116.js"><link rel="prefetch" href="/assets/js/25.3a306da5.js"><link rel="prefetch" href="/assets/js/26.b94cc35f.js"><link rel="prefetch" href="/assets/js/27.ae5514a1.js"><link rel="prefetch" href="/assets/js/28.af72a617.js"><link rel="prefetch" href="/assets/js/29.162c0949.js"><link rel="prefetch" href="/assets/js/3.f1b8e57f.js"><link rel="prefetch" href="/assets/js/30.6aad12fb.js"><link rel="prefetch" href="/assets/js/31.92ecca39.js"><link rel="prefetch" href="/assets/js/32.d4c5724f.js"><link rel="prefetch" href="/assets/js/33.2a4cab7c.js"><link rel="prefetch" href="/assets/js/34.36841bb0.js"><link rel="prefetch" href="/assets/js/35.6889d806.js"><link rel="prefetch" href="/assets/js/36.c2603237.js"><link rel="prefetch" href="/assets/js/37.7df7ad7e.js"><link rel="prefetch" href="/assets/js/38.b9496a10.js"><link rel="prefetch" href="/assets/js/39.20cf1d73.js"><link rel="prefetch" href="/assets/js/4.99076729.js"><link rel="prefetch" href="/assets/js/40.65a31dcc.js"><link rel="prefetch" href="/assets/js/41.db074ad3.js"><link rel="prefetch" href="/assets/js/42.3f3bc55d.js"><link rel="prefetch" href="/assets/js/43.7805fcad.js"><link rel="prefetch" href="/assets/js/44.d491e85a.js"><link rel="prefetch" href="/assets/js/45.70f3403f.js"><link rel="prefetch" href="/assets/js/5.82a27a7a.js"><link rel="prefetch" href="/assets/js/6.88880e3d.js"><link rel="prefetch" href="/assets/js/7.b965044b.js"><link rel="prefetch" href="/assets/js/8.e8ccb9c7.js"><link rel="prefetch" href="/assets/js/9.2c6f2bb6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d55c9000.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">OpenMQTTGateway V1</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/devices" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Devices
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/boards" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Boards
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/devices" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Devices
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/boards" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Boards
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">0 - What is it for 🏠</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1 - Prerequisites🧭</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2 - Set it up 🔨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3 - Upload ➡️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>4 - Use ✈️</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/use/rf.html" aria-current="page" class="active sidebar-link">RF gateways  (433mhz/315mhz)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/use/rf.html#rcswitch-based-gateway" class="sidebar-link">RCSwitch based gateway</a></li><li class="sidebar-sub-header"><a href="/use/rf.html#pilight-gateway" class="sidebar-link">Pilight gateway</a></li><li class="sidebar-sub-header"><a href="/use/rf.html#rf-with-sonoff-rf-bridge" class="sidebar-link">RF with SONOFF RF BRIDGE</a></li><li class="sidebar-sub-header"><a href="/use/rf.html#rf2-gateway-kaku" class="sidebar-link">RF2 gateway KAKU</a></li></ul></li><li><a href="/use/ble.html" class="sidebar-link">BLE gateway</a></li><li><a href="/use/ir.html" class="sidebar-link">IR gateway</a></li><li><a href="/use/lora.html" class="sidebar-link">LORA gateway</a></li><li><a href="/use/gsm.html" class="sidebar-link">GSM 2G gateway</a></li><li><a href="/use/rs232.html" class="sidebar-link">RS232 gateway</a></li><li><a href="/use/rfm69.html" class="sidebar-link">RFM69 gateway</a></li><li><a href="/use/sensors.html" class="sidebar-link">Sensors</a></li><li><a href="/use/actuators.html" class="sidebar-link">Actuators</a></li><li><a href="/use/boards.html" class="sidebar-link">Boards</a></li><li><a href="/use/gateway.html" class="sidebar-link">System commands (ESP only)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5 - Integrate 🎉</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6 - Participate 💻</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rf-gateways-433mhz-315mhz"><a href="#rf-gateways-433mhz-315mhz" class="header-anchor">#</a> RF gateways  (433mhz/315mhz)</h1> <p>Note that for the moment RF, RF2 and Pilight can not be activated on the same boards together.</p> <h2 id="rcswitch-based-gateway"><a href="#rcswitch-based-gateway" class="header-anchor">#</a> RCSwitch based gateway</h2> <h3 id="receiving-data-from-rf-signal"><a href="#receiving-data-from-rf-signal" class="header-anchor">#</a> Receiving data from RF signal</h3> <p>Subscribe to all the messages with mosquitto or open your MQTT client software:</p> <p><code>sudo mosquitto_sub -t +/# -v</code></p> <p>Generate your RF signals by pressing a remote button or other and you should see :</p> <p><code>home/OpenMQTTGateway/433toMQTT {&quot;value&quot;:1315156,&quot;protocol&quot;:1,&quot;length&quot;:24,&quot;delay&quot;:317}</code></p> <h3 id="disabling-transmit-function-to-safe-a-pin"><a href="#disabling-transmit-function-to-safe-a-pin" class="header-anchor">#</a> Disabling Transmit function to safe a PIN</h3> <p>To disable transmit functions to allow the use of another pin, add the following to the config_rf.h file :</p> <p><code>#define RF_DISABLE_TRANSMIT</code></p> <h3 id="send-data-by-mqtt-to-convert-it-on-rf-signal"><a href="#send-data-by-mqtt-to-convert-it-on-rf-signal" class="header-anchor">#</a> Send data by MQTT to convert it on RF signal</h3> <p><code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTto433&quot; -m '{&quot;value&quot;:1315156}'</code></p> <p>This command will send by RF the code 1315156 and use the default parameters (protocol 1, delay 350)</p> <p>Arduino IDE serial data received when publishing data by MQTT</p> <p><img src="/assets/img/OpenMQTTGateway_serial1.b8169d69.jpg" alt=""></p> <p>We see that the Arduino receive the value 1315156 on the MQTT subject &quot;MQTTto433&quot; and send the data by RF</p> <p>Arduino IDE serial data received when receiving data by 433Mhz</p> <p><img src="/assets/img/OpenMQTTGateway_serial2.9629e5a0.jpg" alt=""></p> <h3 id="send-data-by-mqtt-with-advanced-rf-parameters"><a href="#send-data-by-mqtt-with-advanced-rf-parameters" class="header-anchor">#</a> Send data by MQTT with advanced RF parameters</h3> <p>RF sending support three advanced parameters; bits length, RF protocol and RF pulselength
if you want to use a different RCswitch protocol put inside your payload the protocol number 2, &quot;protocol&quot;:2.</p> <p>if you want to use a pulselength 315 put inside your topic &quot;delay&quot;:315</p> <p>if you want to use a bits number different than 24 put inside your topic &quot;length&quot;:24 for example</p> <p>Example:
<code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTto433&quot; -m '{&quot;value&quot;:1315156,&quot;protocol&quot;:2,&quot;length&quot;:24,&quot;delay&quot;:315}'</code>
will make RCSwitch use the protocol 2 with a pulselength of 315ms and a bits number of 24</p> <h3 id="repeat-the-rf-signal-openmqttgateway-receive"><a href="#repeat-the-rf-signal-openmqttgateway-receive" class="header-anchor">#</a> Repeat the RF signal OpenMQTTGateway receive</h3> <p>So as to repeat the RF signal received by the gateway once set the following parameter to true in config_RF.h</p> <p><code>#define repeatRFwMQTT true</code></p> <h3 id="repeat-the-rf-signal-several-times"><a href="#repeat-the-rf-signal-several-times" class="header-anchor">#</a> Repeat the RF signal several times</h3> <p>You can add a &quot;repeat&quot; key/value to the MQTTto433 JSON message to override the default number of repeats.</p> <p>Example:
<code>home/OpenMQTTGateway/commands/MQTTto433 {&quot;value&quot;:1315156,&quot;protocol&quot;:1,&quot;length&quot;:24,&quot;delay&quot;:317, &quot;repeat&quot;:10}</code></p> <h3 id="set-transmit-and-receive-frequency-of-cc1101-transceiver-module"><a href="#set-transmit-and-receive-frequency-of-cc1101-transceiver-module" class="header-anchor">#</a> Set Transmit and Receive Frequency of CC1101 Transceiver Module</h3> <p>Default transmit frequency of the CC1101 module is 433.92 Mhz, and this can be can changed by including the frequency in the transmit message.  Parameter is <code>mhz</code> and valid values are 300-348 Mhz, 387-464Mhz and 779-928Mhz.  Actual frequency support will depend on your CC1101 board.</p> <p><code>home/OpenMQTTGateway/commands/MQTTto433 {&quot;value&quot;:1150,&quot;protocol&quot;:6,&quot;length&quot;:12,&quot;delay&quot;:450,&quot;repeat&quot;:8,&quot;mhz&quot;:303.732}</code></p> <p>Default receive frequency of the CC1101 module is 433.92 Mhz, and this can be can changed by sending a message with the frequency.  Parameter is <code>mhz</code> and valid values are 300-348 Mhz, 387-464Mhz and 779-928Mhz.  Actual frequency support will depend on your CC1101 board</p> <p><code>home/OpenMQTTGateway/commands/MQTTto433 {&quot;mhz&quot;:315.026}</code></p> <p>Messages received will include the frequency, and when transmitting on a different frequency the module return to the receive frequency afterwards.  ie transmit messages on 303.732 Mhz then receive messages on 433.92 Mhz</p> <p><code>{&quot;value&quot;:4534142,&quot;protocol&quot;:6,&quot;length&quot;:26,&quot;delay&quot;:356,&quot;mhz&quot;:315.026}</code></p> <h2 id="pilight-gateway"><a href="#pilight-gateway" class="header-anchor">#</a> Pilight gateway</h2> <h3 id="receiving-data-from-rf-signal-2"><a href="#receiving-data-from-rf-signal-2" class="header-anchor">#</a> Receiving data from RF signal</h3> <p>Subscribe to all the messages with mosquitto or open your MQTT client software:</p> <p><code>sudo mosquitto_sub -t +/# -v</code></p> <p>Generate your RF signals by pressing a remote button or other and you will see :</p> <p><img src="/assets/img/OpenMQTTGateway_Pilight_Digoo-DG-R8S.8a0f9d60.png" alt=""></p> <h3 id="send-data-by-mqtt-to-transmit-a-rf-signal"><a href="#send-data-by-mqtt-to-transmit-a-rf-signal" class="header-anchor">#</a> Send data by MQTT to transmit a RF signal</h3> <h4 id="using-a-known-protocol"><a href="#using-a-known-protocol" class="header-anchor">#</a> Using a known protocol</h4> <p><strong>ON</strong> <code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTtoPilight&quot; -m '{&quot;message&quot;:&quot;{\&quot;systemcode\&quot;:12,\&quot;unitcode\&quot;:22,\&quot;on\&quot;:1}&quot;,&quot;protocol&quot;:&quot;elro_400_switch&quot;}'</code></p> <p><strong>OFF</strong> <code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTtoPilight&quot; -m '{&quot;message&quot;:&quot;{\&quot;systemcode\&quot;:12,\&quot;unitcode\&quot;:22,\&quot;off\&quot;:1}&quot;,&quot;protocol&quot;:&quot;elro_400_switch&quot;}'</code></p> <p>These commands will transmit by RF the signals to actuate an elro_400 switch.</p> <h4 id="using-a-raw-signal"><a href="#using-a-raw-signal" class="header-anchor">#</a> Using a raw signal</h4> <p>You can transmit raw signal data by using the &quot;raw&quot; protocol. This uses the Pilight pulse train string format. One such example string, representing a transmission for Nexus protocol weather stations, looks like this: <code>c:03020202010102020102010101010101010202020201020102020202020101010201010202;p:500,1000,2000,4000;r:12@</code>. This string represents pulses and gaps directly.</p> <p>Each number in the list after <code>p:</code> that ends with <code>;</code> stands for <strong>p</strong>ulse and gap lengths in microseconds (µs). In this example, we have a list containing lengths of 500µs, 1000µs, 2000µs, and 4000µs.</p> <p>Each number after <code>c:</code> and ended by <code>;</code> represents a <strong>c</strong>ode that references the <code>p:</code> list by index. In this example, the first 4 numbers after <code>c:</code> are 0, 3, 0, and 2, which reference <code>p:</code>[0] = 500, <code>p:</code>[3] = 4000, <code>p:</code>[0] = 500, and <code>p:</code>[2] = 2000, respectively. In the language of digital radio transceiving, the most basic unit is usually a pulse and gap pair; in other words, 0s and 1s are represented by a pulse followed by a gap (lack of pulse) and the time lengths of these pulses and gaps. Different protocols have different pulse lengths and gap lengths representing 0, and a different one representing 1. Because of this pulse-gap nature, the codes in <code>c:</code> must be taken as pairs; the first number in a pair represents the length of the pulse, and the second number the subsequent gap. In this example, the first pair, 03, represents a pulse of 500µs followed by a gap of 4000µs. The next pair, 02, represents a pulse of 500µs followed by a gap of 2000µs.</p> <p>The number after <code>r:</code> represents how many times the message in the string is to be <strong>r</strong>epeated. The <code>r:</code> block is optional. The default number of repeats if <code>r:</code> is not specified is 10. Greater than about 100 repeats will cause a crash due to memory usage. If this example were written without specifying repeats, it would look like this: <code>{&quot;raw&quot;:&quot;c:03020202010102020102010101010101010202020201020102020202020101010201010202;p:500,1000,2000,4000@&quot;}</code></p> <p>The entire string must end in a <code>@</code>. Each block must end in a <code>;</code>, but if it is the last block in the string, the <code>@</code> replaces the <code>;</code>. Since the <code>r:</code> block is optional, this last block could be either <code>p:</code> or <code>r:</code>.</p> <p>The JSON for the MQTT message to <code>home/OpenMQTTGateway/commands/MQTTtoPilight</code> should specify the pulse train string as the value for the &quot;raw&quot; key: <code>{&quot;raw&quot;:&quot;c:03020202010102020102010101010101010202020201020102020202020101010201010202;p:500,1000,2000,4000;r:12@&quot;}</code>.</p> <p>e.g. <code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTtoPilight&quot; -m '{&quot;raw&quot;:&quot;c:03020202010102020102010101010101010202020201020102020202020101010201010202;p:500,1000,2000,4000;r:12@&quot;}'</code></p> <h2 id="rf-with-sonoff-rf-bridge"><a href="#rf-with-sonoff-rf-bridge" class="header-anchor">#</a> RF with SONOFF RF BRIDGE</h2> <h3 id="receiving-data-from-rf-signal-3"><a href="#receiving-data-from-rf-signal-3" class="header-anchor">#</a> Receiving data from RF signal</h3> <p>Subscribe to all the messages with mosquitto or open your MQTT client software:</p> <p><code>sudo mosquitto_sub -t +/# -v</code></p> <p>Generate your RF signals by pressing a remote button or other and you will see:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>home/OpenMQTTGateway/SRFBtoMQTT {&quot;raw&quot;:&quot;2B660186042E00E7E5&quot;,&quot;value&quot;:&quot;59365&quot;,&quot;delay&quot;:&quot;1111&quot;,&quot;val_Thigh&quot;:&quot;390&quot;,&quot;val_Tlow&quot;:&quot;1070&quot;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The first parameter is the raw value extracted from the RF module of the Sonoff bridge. The data are in hexadecimal and correspond to the details below:
https://www.itead.cc/wiki/images/5/5e/RF_Universal_Transeceive_Module_Serial_Protocol_v1.0.pdf
OpenMQTTGateway process the raw value to extract the other decimal values that can be reused to reproduce a signal (raw value can also be reused).</p> <p>NOTE: currently the device doesn't receive correct values from Switches remote control</p> <h3 id="send-data-by-mqtt-to-convert-it-on-rf-signal-2"><a href="#send-data-by-mqtt-to-convert-it-on-rf-signal-2" class="header-anchor">#</a> Send data by MQTT to convert it on RF signal</h3> <p><code>mosquitto_pub -t &quot;home/OpenMQTTGateway/commands/MQTTtoSRFB&quot; -m '{&quot;value&quot;:1315156}'</code></p> <p>This command will send by RF the code 1315156 and use the default parameters:
Repeat = 1
Low time= 320
High time= 900
SYNC = 9500</p> <h3 id="send-data-by-mqtt-with-advanced-rf-parameters-2"><a href="#send-data-by-mqtt-with-advanced-rf-parameters-2" class="header-anchor">#</a> Send data by MQTT with advanced RF parameters</h3> <p>RF bridge sending support four advanced parameters; Repeat, Low time, High time &amp; Sync
if you want to repeat your signal sending put into your json payload &quot;repeat&quot;:2, 2 means 2 repetitions of signal</p> <p>if you want to use a low time of 315 put inside your json payload &quot;Tlow&quot;:315</p> <p>if you want to use a high time of 845 put inside your json payload &quot;Thigh&quot;:845</p> <p>if you want to use a sync time of 9123 put inside your json payload &quot;Tsyn&quot;:9123</p> <p>Example:
<code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoSRFB/Tlow_315/Thigh_845/Tsyn_9123 -m '{&quot;value&quot;:&quot;33151562&quot;,&quot;delay&quot;:&quot;9123&quot;,&quot;val_Thigh&quot;:&quot;845&quot;,&quot;val_Tlow&quot;:&quot;315&quot;}'</code>
will make RF Bridge send a signal with the use of listed parameters 315, 845, 9123...</p> <p><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoSRFB/Raw -m '{&quot;raw&quot;:&quot;267A013603B6140551&quot;}'</code>
will make RF Bridge send a signal with the use of advanced parameters defined in the raw string</p> <h2 id="rf2-gateway-kaku"><a href="#rf2-gateway-kaku" class="header-anchor">#</a> RF2 gateway KAKU</h2> <p>RF2 gateway enables to send command to RF devices with the KAKU protocol. DIO chacon devices are an example.
It uses the same pinout as the RF gateway and both gateways can be used on the same setup.</p> <p>Receiving RF codes with the KAKU protocol is not compatible with ZgatewayRF , so as to get the code of your remotes you should comment ZgatewayRF in User_config.h.
Transmitting can be done with both ZgatewayRF and ZgatewayRF2</p> <h3 id="receiving-data-from-kaku-signal"><a href="#receiving-data-from-kaku-signal" class="header-anchor">#</a> Receiving data from KAKU signal</h3> <p>Subscribe to all the messages with mosquitto or open your MQTT client software:</p> <p><code>sudo mosquitto_sub -t +/# -v</code></p> <p>Generate your RF signals by pressing a remote button or other and you will see :</p> <p><code>home/OpenMQTTGateway/RF2toMQTT {&quot;unit&quot;:0,&quot;groupBit&quot;:0,&quot;period&quot;:273,&quot;address&quot;:8233228,&quot;switchType&quot;:0}</code></p> <h3 id="send-data-by-mqtt-to-convert-it-on-kaku-signal"><a href="#send-data-by-mqtt-to-convert-it-on-kaku-signal" class="header-anchor">#</a> Send data by MQTT to convert it on KAKU signal</h3> <p>Once you get the infos publish the parameters with mqtt like that for off:</p> <p><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoRF2 -m &quot;{&quot;unit&quot;:0,&quot;groupBit&quot;:0,&quot;period&quot;:273,&quot;address&quot;:8233228,&quot;switchType&quot;:0}&quot;</code></p> <p>for on:</p> <p><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoRF2 -m &quot;{&quot;unit&quot;:0,&quot;groupBit&quot;:0,&quot;period&quot;:273,&quot;adress&quot;:8233228,&quot;switchType&quot;:1}&quot;</code></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/1technophile/OpenMQTTGateway/edit/development/docs/use/rf.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/25/2021, 12:54:08 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/upload/troubleshoot.html" class="prev">
        Troubleshooting
      </a></span> <span class="next"><a href="/use/ble.html">
        BLE gateway
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a0238183.js" defer></script><script src="/assets/js/2.fe34e03b.js" defer></script><script src="/assets/js/11.9ebab4b7.js" defer></script>
  </body>
</html>
